{% load static %}
{% load my_filter %}
{% load i18n %}
<!doctype html>
<html lang="en">

  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    
  
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    
    <title>{% trans "Operating Schedule" %} - {{date|date:"d-m-Y (l)"}}{% if schedule_for %} - {{schedule_for}}{% endif %}</title>
    <style>
      
      @font-face {
        font-family: ArialUnicode;
        src: url("static/Arial Unicode.ttf")
      }
      <!-- other stuff here -->
      body {
          margin: 0;
          font-family: "ArialUnicode", sans-serif;
      }
    .table-sm td, .table-sm th {
      padding: 0.0rem;
      }

      @media print{
        @page {
          size: landscape;
          margin: 5mm;
          width: 210mm;
          height: 297mm;
        
        }
        .table td, .table th {
          border-width: 1px !important;
          border-style: solid !important;
          border-color: #000 !important;
        }
        .trow{
          border-width: 2px !important;
          border-style: solid !important;
          border-color: #000 !important;
          
      }

      .theader{
        border-width: 2px !important;
        border-style: solid !important;
        border-color: #000 !important;
        background-color: #000 !important;
      }
      .theader th{
        background-color: #000 !important;
        font-size: 11px !important;
        color: #fff !important;
      }
      
    
    </style>


  </head>


  <body style="text-align: center" dir="ltr" onload="window.print()">
    {% comment %} <table class="table table-borderless" >
        <tr>
            <td style="text-align: left;" class="align-middle">
                <h6>{{request.user.employee.company.name_en}}</h4>
                <p>{{request.user.employee.company.address_en}}<br>
                C.R No. {{request.user.employee.company.cr_no}} - MOH Permit No. {{request.user.employee.company.permit_no}}</p>
            </td> {% endcomment %}
            <img src="{{request.user.employee.company.logo.url}}" width="80px">

            {% comment %} <td style="text-align: right;" class="align-middle">
                <h6> {{request.user.employee.company.name_ar}}</h6>
                <p>{{request.user.employee.company.address_ar}}<br>
                س.ت: {{request.user.employee.company.cr_no}} - رقم التصريح: {{request.user.employee.company.permit_no}}</p>
            </td>
        </tr>
    </table> {% endcomment %}
    {% if request.LANGUAGE_CODE == "ar" %}
    <div class="" dir="rtl" >
      {% else %}
    <div class="" dir="ltr" >
      {% endif %}

      
      
      
              <h6>{% trans "Operating Schedule" %} - {{date|date:"d/m/Y (l)"}}{% if schedule_for %} - {{schedule_for}}{% endif %}</h6>
              

              <table class="table table-sm table-bordered table-striped" style="font-size: 8px;">
                  <small>
                  <thead class="thead-dark">
                        <tr class="theader">
                            <th>#</th>
                            <th>{% trans "BRN" %}</th>
                            <th>{% trans "Voucher " %}</th>
                            <th>{% trans "Reference no " %}</th>
        
                            <th>{% trans "Date" %}</th>
                            <th>{% trans "Time" %}</th>
                            <th>{% trans "Agent" %}</th>
                            <th>{% trans "PAX" %}</th>
                            <th>{% trans "From" %}</th>
                            <th>{% trans "To" %}</th>
        
                            <th>{% trans "Transport type" %}</th>
                            <th>{% trans "Transport Company" %}</th>
        
        
                            <th>{% trans "Group Leader" %}</th>
                            <th>{% trans "Driver(s)" %}</th>
                            <th>{% trans "Plate no" %}</th>
                            <th>{% trans "Remarks" %}</th>
                            <th>{% trans "Status" %}
        
                          </tr>
                  </thead>
              </small>
                  <tbody>
                      <tbody>
                          {% for movement in movements %}
                          <tr class="trow">
                            <td class="align-middle" rowspan="2">{{forloop.counter}}</td>
                            <td class="align-middle"  rowspan="2">
                              {% if movement.voucher.transport_brn %}
                              {{movement.voucher.transport_brn}}
                              {% endif %}
                            </td>
                            <td class="align-middle" rowspan="2">
                              UP-{{movement.voucher.id}}
                            </td>
                            <td class="align-middle" rowspan="2">
                              {% if movement.voucher.agent_referance_no %}
                              {{movement.voucher.agent_referance_no}}
                              {% endif %}
                            </td>
                            <td class="align-middle" rowspan="2">{{movement.date|date:"d/m/Y"}}</td>
                            <td class="align-middle" rowspan="2">{{movement.time|date:"H:i"}}</td>
      
                            <td class="align-middle" rowspan="2">{{movement.voucher.agent}} ({{movement.voucher.country}})</td>
                            <td class="align-middle" rowspan="2"><strong>{{movement.voucher.pax}}</strong></td>
                            <td class="align-middle" rowspan="2"><strong>{{movement.route.route_from}}</strong>
                              {% if movement.movement_from_hotel %}
                              <br>
                              {{movement.movement_from_hotel}}
                              {% endif %}
                              {% if movement.route.is_linked_with_arrival_flight %}
                              <br>
                              {{movement.flight_no}} - {{movement.voucher.arrival_time|date:"H:i"}} {% if movement.flight_date_differance %}<sup> {{movement.flight_date_differance}}</sup>{% endif %}
                              {% endif %}
                            </td>
                            <td class="align-middle" rowspan="2"><strong>{{movement.route.route_to}}</strong>
                              {% if movement.movement_to_hotel %}
                              <br>
                              {{movement.movement_to_hotel}}
                              {% endif %}
                              {% if movement.route.is_linked_with_departure_flight %}
                              <br>
                              {{movement.flight_no}} - {{movement.voucher.departure_time|date:"H:i"}} {% if movement.flight_date_differance %}<sup> {{movement.flight_date_differance}}</sup>{% endif %}
                              {% endif %}
                            </td>
                            <td class="align-middle" rowspan="2">
                              {% if movement.type %}
                              {{movement.type}}
                              {% endif %}
                            </td>
                            <td class="align-middle" rowspan="2">
                              {% if movement.transport_company %}
                              {{movement.transport_company}}
                              {% elif movement.voucher.transport_company %}
                              {{movement.voucher.transport_company}}
                              {% endif %}
                            </td>
                    
      
      
                            <td class="align-middle" rowspan="2">
                                <strong>
                                  {%if movement.voucher.group_leader %}
                                  {{movement.voucher.group_leader}}</strong>
                                  {% endif %}
                                  {% if movement.voucher.group_leader_contact %}
                                  <br>{{movement.voucher.group_leader_contact}}
                                  {% endif %}
                              </a>
                            </td>
                            <td class="align-middle">
                              {%if movement.first_driver_name %}
                              <strong>{{movement.first_driver_name}}</strong>
                              {% else %}
                              &nbsp;
                              {% endif %}
                              <br>
                              {%if movement.first_driver_phone %}
                              {{movement.first_driver_phone}}
                              {% else %}
                              -
                              {% endif %}
                            </td>
      
      
      
                            <td class="align-middle" rowspan="2">
                              {% if movement.no_plate %}
                              {{movement.no_plate}}
                              {% endif %}
                            </td>
                            <td class="align-middle" rowspan="2">
                              {% if movement.remarks %}
                              {{movement.remarks}}
                              {% endif %}
                            </td>
                            <td class="align-middle" rowspan="2">
                              {% if movement.status %}
                              {{movement.get_status_display}}
                              {% endif %}
                            </td>
      
      
                          </tr>
                          <tr class="trow">
                            <td class="rowspan2">
                              {%if movement.second_driver_name %}
                              <strong>{{movement.second_driver_name}}</strong>
                              {% else %}
                              &nbsp;
                              {% endif %}
                              <br>
                              {%if movement.second_driver_phone %}
                              {{movement.second_driver_phone}}
                              {% else %}
                              -
                              {% endif %}
                            </td>
                          </tr>
                          {% endfor %}
      
                  </tbody>
                </table>  
              
                
      
      
             
    </div>
    
    <footer >
      <p><br> <img width="40px" src="{% static 'assets/images/umrahflow_logo.png'%}" </p>
  </footer>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>
</html>